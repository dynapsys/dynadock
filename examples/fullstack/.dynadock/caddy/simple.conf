{
    admin off
}

:80 {
    respond /health "OK" 200
}

:443 {
    tls /etc/caddy/certs/_wildcard.local.dev+2.pem /etc/caddy/certs/_wildcard.local.dev+2-key.pem
    
    @frontend host frontend.local.dev
    handle @frontend {
        reverse_proxy 127.0.0.1:8000
    }
    
    @mailhog host mailhog.local.dev  
    handle @mailhog {
        reverse_proxy 127.0.0.1:8025
    }
    
    @health path /health
    handle @health {
        respond "OK" 200
    }
    
    handle {
        respond "DynaDock - Available: frontend.local.dev, mailhog.local.dev" 404
    }
}
